
import jsonfile from "jsonfile";
import moment from "moment";
import simpleGit from "simple-git";

const path = "./data.json";

// Converts (week, day) to commit on that spot
const markCommit = (x, y) => {
  const date = moment()
    .subtract(1, "y")
    .add(1, "d")
    .add(x, "w")
    .add(y, "d")
    .format();

  const data = { date };
  jsonfile.writeFile(path, data, () => {
    simpleGit().add([path]).commit(date, { "--date": date }).push();
  });
};

const xyCoordinates = [
  [5, 0],
  [6, 0],
  [7, 0],
  [8, 0],
  [5, 1],
  [5, 2],
  [5, 3],
  [6, 3],
  [7, 3],
  [8, 3],
  [8, 4],
  [8, 5],
  [5, 6],
  [6, 6],
  [7, 6],
  [8, 6],
  [10, 0],
  [11, 0],
  [12, 0],
  [11, 1],
  [11, 2],
  [11, 3],
  [11, 4],
  [11, 5],
  [10, 6],
  [11, 6],
  [12, 6],
  [15, 0],
  [16, 0],
  [17, 1],
  [17, 2],
  [17, 3],
  [17, 4],
  [17, 5],
  [16, 6],
  [15, 6],
  [15, 1],
  [15, 2],
  [15, 3],
  [15, 4],
  [15, 5],
  [20, 0],
  [21, 0],
  [22, 1],
  [22, 2],
  [22, 3],
  [22, 4],
  [22, 5],
  [21, 6],
  [20, 6],
  [20, 1],
  [20, 2],
  [20, 3],
  [20, 4],
  [20, 5],
  [25, 0],
  [25, 1],
  [25, 2],
  [25, 3],
  [25, 4],
  [25, 5],
  [25, 6],
  [26, 3],
  [27, 0],
  [27, 1],
  [27, 2],
  [27, 3],
  [27, 4],
  [27, 5],
  [27, 6],
  [31, 0],
  [30, 1],
  [32, 1],
  [30, 2],
  [32, 2],
  [30, 3],
  [31, 3],
  [32, 3],
  [30, 4],
  [32, 4],
  [30, 5],
  [32, 5],
  [30, 6],
  [32, 6],
  [35, 0],
  [36, 0],
  [35, 1],
  [37, 1],
  [35, 2],
  [37, 2],
  [35, 3],
  [36, 3],
  [35, 4],
  [37, 4],
  [35, 5],
  [37, 5],
  [35, 6],
  [37, 6],
  [40, 0],
  [41, 0],
  [42, 0],
  [41, 1],
  [41, 2],
  [41, 3],
  [41, 4],
  [41, 5],
  [41, 6],
  [45, 0],
  [45, 1],
  [45, 2],
  [45, 3],
  [45, 4],
  [45, 5],
  [45, 6],
  [46, 3],
  [47, 0],
  [47, 1],
  [47, 2],
  [47, 3],
  [47, 4],
  [47, 5],
  [47, 6]
];

// Draw center-aligned 'SIDDHARTH'
const drawGraph = () => {
  xyCoordinates.forEach(([x, y], i) => {
    setTimeout(() => markCommit(x, y), i * 150);
  });
};

drawGraph();
